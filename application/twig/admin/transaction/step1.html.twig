{% extends 'admin/layout.html.twig' %}

{% block content_title %}
	
{% endblock %}

{% block content %}
	
	<div class="row clearfix">
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
	        <div class="card" style="width: 50%; margin: 0 auto !important;">
	            <div class="header">
	                <h2>
	                    Form Pembuatan SPK
	                </h2>
	            </div>
	            <div class="body" style="padding: 20px">


	            	<div class="row clearfix">

	            		<div class="col-md-12">

	            			<form class="transaction-form" method="POST" action="{{ site_url('admin/transaction/save') }}">
							

					        	<input name="id" type="hidden" value="{% if get_header %}{{ get_header.header_id }}{% endif %}">

				        		<label for="email_address">Machine</label>
				                <div class="form-group">
				                    <div class="form-line">
				                    	
					                    <select class="form-control" name="mesin" required="required">
					                        <option value="">-- Silahkan Pilih --</option>
					                        {% if machine_data %}

					                        	{% for machine_row in machine_data %}

					                        		<option value="{{ machine_row.MachineId }}" {% if same(get_header.machine_id, machine_row.MachineId) %} selected="selected" {% endif %}>
					                        			{{ machine_row.MachineId }}
					                        		</option>
					                        	{% endfor %}

					                        {% endif %}
					                    </select>
				                    </div>
				                </div>

				                <label for="email_address">Week</label>
				                <div class="form-group">
				                    <div class="form-line">
				                    	
					                    <select class="form-control week-options" required="required">
					                        <option value="">-- Silahkan Pilih --</option>
					                        {% if week_in_year() %}

					                        	{% for key, week_row in week_in_year() %}

					                        		<option value="{{ week_row['date_start'] ~ '-' ~ week_row['date_finish'] }}">
					                        			{{ add_zero(key+1) ~ ' - ' ~ week_row['date_start'] ~ ' - ' ~ week_row['date_finish'] }}
					                        		</option>
					                        	{% endfor %}

					                        {% endif %}
					                    </select>
				                    </div>
				                </div>

				                <!--<label for="email_address">Shift</label>
				                <div class="form-group">
				                    <div class="form-line">
				                    	
					                    <select class="form-control" name="mesin" required="required">
					                        <option value="">-- Silahkan Pilih --</option>
					                        {% if shift_data %}

					                        	{% for shift_row in shift_data %}

					                        		<option value="{{ shift_row.ShiftNo }}" {% if same(get_header.machine_id, shift_row.ShiftDescription) %} selected="selected" {% endif %}>
					                        			{{ shift_row.ShiftDescription }}
					                        		</option>
					                        	{% endfor %}

					                        {% endif %}
					                    </select>
				                    </div>
				                </div>-->

				                <label>Tanggal</label>
				                <div class="form-group">

				                	<div class="input-group">
				                        <div class="form-line">
				                            <input class="form-control report-date-start" name="date_start" type="text" style="text-align: center;" required="required" value="{% if get_header %}{{ get_header.date_start }}{% endif %}">
				                        </div>
				                        <span class="input-group-addon">
				                        	s/d
				                        </span>
				                        <div class="form-line">
				                            <input class="form-control report-date-finish" name="date_finish" type="text" style="text-align: center;" required="required" value="{% if get_header %}{{ get_header.date_finish }}{% endif %}">
				                        </div>
				                    </div>
				                    <input class="week-number form-control" type="hidden" name="week">

				                </div>

				                <div class="text-right">
								    <button type="submit" class="btn btn-primary waves-effect">Simpan</button>

								    <div class="preloader pl-size-xs m-t-20 m-l-10" style="visibility: hidden;">
							            <div class="spinner-layer pl-teal">
							                <div class="circle-clipper left">
							                    <div class="circle"></div>
							                </div>
							                <div class="circle-clipper right">
							                    <div class="circle"></div>
							                </div>
							            </div>
							        </div>
				                </div>
						                

							</form>


	            		</div>

	            	</div>

		        </div>
		    </div>
		</div>
	</div>


{% endblock %}

{% block javascript %}
	{{ parent() }}

	<script type="text/javascript" src="{{ base_url('assets_app/js/transaction.js') }}"></script>
	<script type="text/javascript" src="{{ base_url('assets_app/js/report.js') }}"></script>
	<script type="text/javascript">
		window.TRANSACTION.handleSave();
		window.TRANSACTION.handleWeek();
		window.REPORT.handleDatepicker();
	</script>
{% endblock %}


