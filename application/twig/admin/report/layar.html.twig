<!DOCTYPE html>
<html>
	<head>
		<title>View Reporting</title>
	</head>
	<link href="{{ base_url('assets_app/fonts/roboto-v15/font.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ base_url('assets_app/fonts/material-icons/font.css') }}" rel="stylesheet" type="text/css"> 
    <link href="{{ base_url('web/vendor/bootstrap/dist/css/bootstrap.min.css') }}" rel="stylesheet">
    <link href="{{ base_url('web/vendor/plugins-admin/bootstrap-material-datetimepicker/css/bootstrap-material-datetimepicker.css') }}" rel="stylesheet">
    <style type="text/css">
	    @media print{
	     	@page {
	     		size: A4 landscape;
	     	}

	     	body { 
		        writing-mode: horizontal-tb;
		    }

		    .font16 {
		    	font-size: 16px;
		    }

		    .font14 {
		    	font-size: 14px;
		    }

		    .font12 {
		    	font-size: 12px;
		    }

		    .font10 {
		    	font-size: 10px;
		    }

		    .font8 {
		    	font-size: 8px;
		    }

		    .font6 {
		    	font-size: 6px;
		    }

		    .width300 {
		    	width: 300px !important;
		    }

	    }
	    .bg-gray {
	    	background: #DDD;
	    }
	    .bold {
	    	font-weight: bold;
	    }
	</style>

	<body>

		<div class="row">
		</div>
			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 alert alert-info button-action">
				<button class="btn btn-primary report-print">Print</button>
				<a href="javascript:;" class="btn btn-danger report-close">Tutup</a>
			</div>

			<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 table-responsive">

				<table style="width: 100%">
					<tr>
						<td valign="bottom">
							<h2 class="font16 bold">
								{{ machine_description }}
							</h2>
						</td>

						<td valign="bottom" align="center">
							<h2 class="font16 bold">
								SPK-1 <u>&nbsp;&nbsp;&nbsp;SPK Extrusion&nbsp;&nbsp;&nbsp;</u>
							</h2>
						</td>

						<td valign="bottom" align="right">
							<h2 class="font16 bold">
								{{ machine }}
							</h2>
						</td>
					</tr>
				</table>

				<br>

				<!--
				<table border="0" style="width: 100%">
					<tr>
						<th width="200">Std Jam Kerja:</th>
						<th width="150">720 mnt</th>
						<th width="300" style="text-align: right;">Total pemakaian billet (kg):</th>
						<th width="100" style="padding-left: 15px;">51,363 kg</th>
						<th width="150" style="text-align: right;">Berat scrap:</th>
						<th width="100" style="padding-left: 10px;">5,517 kg</th>
						<th width="100" style="text-align: right;">Loss (kg):</th>
						<th width="100" style="padding-left: 15px;">552 kg</th>
					</tr>
					<tr>
						<th>Jam Produktif:</th>
						<th>(228) mnt</th>
						<th style="text-align: right;">Total hasil produksi (kg):</th>
						<th style="padding-left: 15px;">42,774 kg</th>
						<th style="text-align: right;">Berat end-butt:</th>
						<th style="padding-left: 15px;">2,520 kg</th>
						<th style="text-align: right;">Loss (%):</th>
						<th style="padding-left: 15px;">1.08%</th>

					</tr>
					<tr>
						<th>Jam non-efektif:</th>
						<th>948 mnt(131.7%)</th>
					</tr>
				</table>
				-->
								
				


				<br>

				<table class="table table-bordered table-striped">
					<thead>
						<tr class="bg-gray font10 bold">
							<th style="vertical-align: middle;">Sh</th>
							<th style="vertical-align: middle;">Lot</th>
							<th style="vertical-align: middle; width: 200px;">Section Id</th>
							<th style="vertical-align: middle; width: 400px;">Section Name</th>
							<th style="vertical-align: middle;">Finishing</th>
							<th style="vertical-align: middle;">Tbl</th>
							<th style="vertical-align: middle;">Tol</th>
							<th style="vertical-align: middle;">Hole</th>
							<th style="vertical-align: middle;">Berat Std</th>
							<th style="vertical-align: middle;">PPIC Note</th>
							<th style="vertical-align: middle;">Bolster</th>
							<th style="vertical-align: middle;">Pull Awal</th>
							<th style="vertical-align: middle;">BS Blkg</th>
							<th style="vertical-align: middle; width: 100px"">P Tarik</th>
							<th style="vertical-align: middle; width: 100px">H Jadi</th>
							<th style="vertical-align: middle;">BltMax</th>
							<th style="vertical-align: middle;">BltVen</th>
							<th style="vertical-align: middle;">FrBlt</th>
							<th style="vertical-align: middle;">FrPot</th>
							<th style="vertical-align: middle;">Total</th>

						</tr>
						<tr>
							<td class="bg-gray font10 bold" colspan="20" align="center">
								{{ tanggal }}
							</td>
						</tr>
					</thead>

					<tbody>
						{% set total = 0 %}
						{% set sh = '' %}
						{% if search_data %}
						{% for no, row_data in search_data %}


						{% set total_btg = row_data.WeightStandard * row_data.target_prod * row_data.Length %}
						{% set total_btg_arr = [] %}
						{% set total_btg_arr = total_btg_arr|merge([total_btg]) %}

						{% set target_btg = row_data.target_prod %}
						{% if row_data.f2_estfg != '' %}
							{% set target_btg = row_data.f2_estfg * row_data.target_prod %}
						{% endif %}
						{% set total = total + row_data.target_prod %}						

						<tr class="font8">
							<td>
									SH{{ row_data.shift }}
								{% if sh != ''%}
									
								{% else %}
									{# set sh = sh ~ row_data.shift #}
								{% endif %}
							</td>
							<td>{{ add_zero(no + 1) }}.</td>
							<td>{{ row_data.section_id }}</td>
							<td class="font8" style="width: 300px;">{{ row_data.SectionDescription }}</td>
							<td>{{ row_data.finishing_name }}</td>
							<td>{{ row_data.ThicknessLowerLimit|number_format(3, '.', ',') }}</td>
							<td>{{ row_data.ThicknessUpperLimit|number_format(3, '.', ',') }}</td>
							<td>{{ row_data.HoleCount }}</td>
							<td>{{ row_data.WeightStandard|number_format(3, '.', ',') }}</td>
							<td>{{ row_data.ppic_note }}</td>
							<td>{{ row_data.BolsterTypeId }}</td>
							<td>{{ row_data.InitialPullingLength }}m</td>
							<td>{{ row_data.BadEndLength }}m</td>
							<td>{{ row_data.F2_PullingLength }}m</td>
							<td>{{ row_data.F2_EstFG }} BTG</td>
							<td>{{ row_data.F2_EstBilletLengthMax }}m</td>
							<td>{{ '' }}</td>
							<td>{{ row_data.F2_FreqBillet }} Blt</td>
							<td>{{ row_data.F2_FreqCut }}xPot</td>
							<td>{{ row_data.target_prod }} Blt</td>
						</tr>
						{% endfor %}
						{% else %}
						<tr class="font10">
							<td colspan="65"> Data tidak tersedia.</td>
						</tr>
						{% endif %}
					</tbody>
					<tfoot>
						<tr class="font8 bold">
							<th class="bg-gray" colspan="19">Grand Total</th>
							<th class="bg-gray"> {{ total }} Blt</th>
						</tr>
					</tfoot>
			</table>

		</div>

		

	</body>

    <script src="{{ base_url('web/vendor/jquery/dist/jquery.min.js') }}"></script>
    <script src="{{ base_url('web/vendor/bootstrap/dist/js/bootstrap.min.js') }}"></script>
    <script src="{{ base_url('web/vendor/plugins-admin/momentjs/moment.js') }}"></script>
    <script src="{{ base_url('web/vendor/plugins-admin/bootstrap-material-datetimepicker/js/bootstrap-material-datetimepicker.js') }}"></script>
    <script src="{{ base_url('assets_app/js/report.js') }}"></script>

    <script type="text/javascript">
	    $(document).ready(function() {
			$('.report-print').click(function() {
				window.print();
				return false;
			});
			$('.report-close').click(function() {
				window.close();
				return false;
			});
	    });

	    /**
		 * function detect windows print
		 */

		var beforePrint = function() {
			$('.button-action').hide();
		};
		var afterPrint = function() {
			$('.button-action').show();
		};

		if (window.matchMedia) {
			var mediaQueryList = window.matchMedia('print');
			mediaQueryList.addListener(function(mql) {
			    if (mql.matches) {
			        beforePrint();
			    } else {
			        afterPrint();
			    }
			});
		}

		window.onbeforeprint = beforePrint;
		window.onafterprint = afterPrint;

		window.REPORT.handleDatepicker();

	</script>



</html>